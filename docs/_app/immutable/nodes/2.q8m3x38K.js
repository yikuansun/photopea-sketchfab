import{f as Q,s as oe,h as ie,r as re,o as ce,i as ue,e as fe}from"../chunks/scheduler.DeYPQbBC.js";import{S as he,i as de,e as v,s as j,m as X,c as b,d as q,y as H,h as P,g as x,o as _,j as z,k as u,z as O,t as G,a as J,n as me,A as K,B as Y,C as Z,b as pe,f as _e,l as we,p as W,q as ve}from"../chunks/index.DoflCQJQ.js";function D(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}var be={initEmbed:async function(s,e){var t=document.createElement("iframe");t.style.border="0",t.style.width="100%",t.style.height="100%",e?t.src="https://www.photopea.com#"+encodeURI(e):t.src="https://www.photopea.com",s.appendChild(t);var i=new Promise(function(m,p){var h=function(c){m(t),window.removeEventListener("message",h)};window.addEventListener("message",h)});return await i},runScript:async function(s,e){var t=new Promise(function(m,p){var h=[],c=function(f){f.source==s&&(h.push(f.data),f.data=="done"&&(m(h),window.removeEventListener("message",c)))};window.addEventListener("message",c)});s.postMessage(e,"*");var i=await t;return i},addBinaryAsset:async function(s,e){var t=new Promise(function(i,m){var p=function(h){h.source==s&&h.data=="done"&&(i(!0),window.removeEventListener("message",p))};window.addEventListener("message",p)});return s.postMessage(e,"*"),await t}};function ge(s){const e=s-1;return e*e*e+1}function $(s,{delay:e=0,duration:t=400,easing:i=ge,x:m=0,y:p=0,opacity:h=0}={}){const c=getComputedStyle(s),f=+c.opacity,o=c.transform==="none"?"":c.transform,U=f*(1-h),[C,B]=Q(m),[R,T]=Q(p);return{delay:e,duration:t,easing:i,css:(L,g)=>`
			transform: ${o} translate(${(1-L)*C}${B}, ${(1-L)*R}${T});
			opacity: ${f-U*g}`}}function ee(s,e,t){const i=s.slice();return i[22]=e[t],i}function te(s,e,t){const i=s.slice();return i[25]=e[t],i}function se(s){let e,t,i="Hide gallery",m,p,h,c,f,o,U,C,B,R,T,L,g,N,A,E,I="More",k,M,V,w,l=D(s[4]),n=[];for(let r=0;r<l.length;r+=1)n[r]=le(te(s,l,r));let S=D(s[3]),y=[];for(let r=0;r<S.length;r+=1)y[r]=ne(ee(s,S,r));return{c(){e=v("div"),t=v("button"),t.textContent=i,m=j(),p=v("br"),h=j(),c=v("br"),f=j(),o=v("input"),U=j(),C=v("br"),B=j();for(let r=0;r<n.length;r+=1)n[r].c();R=j(),T=v("br"),L=j();for(let r=0;r<y.length;r+=1)y[r].c();g=j(),N=v("br"),A=j(),E=v("button"),E.textContent=I,this.h()},l(r){e=b(r,"DIV",{id:!0,class:!0});var d=q(e);t=b(d,"BUTTON",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-1vklefy"&&(t.textContent=i),m=P(d),p=b(d,"BR",{}),h=P(d),c=b(d,"BR",{}),f=P(d),o=b(d,"INPUT",{placeholder:!0,id:!0,class:!0}),U=P(d),C=b(d,"BR",{}),B=P(d);for(let a=0;a<n.length;a+=1)n[a].l(d);R=P(d),T=b(d,"BR",{}),L=P(d);for(let a=0;a<y.length;a+=1)y[a].l(d);g=P(d),N=b(d,"BR",{}),A=P(d),E=b(d,"BUTTON",{class:!0,"data-svelte-h":!0}),H(E)!=="svelte-1opku3j"&&(E.textContent=I),d.forEach(x),this.h()},h(){_(t,"class","svelte-jw21jk"),_(o,"placeholder","Search for a model"),_(o,"id","searchBar"),_(o,"class","svelte-jw21jk"),_(E,"class","svelte-jw21jk"),_(e,"id","modelGallery"),_(e,"class","svelte-jw21jk")},m(r,d){z(r,e,d),u(e,t),u(e,m),u(e,p),u(e,h),u(e,c),u(e,f),u(e,o),K(o,s[6]),u(e,U),u(e,C),u(e,B);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);u(e,R),u(e,T),u(e,L);for(let a=0;a<y.length;a+=1)y[a]&&y[a].m(e,null);u(e,g),u(e,N),u(e,A),u(e,E),M=!0,V||(w=[O(t,"click",s[15]),O(o,"input",s[16]),O(o,"change",s[9]),O(E,"click",s[10])],V=!0)},p(r,d){if(d&64&&o.value!==r[6]&&K(o,r[6]),d&304){l=D(r[4]);let a;for(a=0;a<l.length;a+=1){const F=te(r,l,a);n[a]?n[a].p(F,d):(n[a]=le(F),n[a].c(),n[a].m(e,R))}for(;a<n.length;a+=1)n[a].d(1);n.length=l.length}if(d&2186){S=D(r[3]);let a;for(a=0;a<S.length;a+=1){const F=ee(r,S,a);y[a]?y[a].p(F,d):(y[a]=ne(F),y[a].c(),y[a].m(e,g))}for(;a<y.length;a+=1)y[a].d(1);y.length=S.length}},i(r){M||(r&&ue(()=>{M&&(k||(k=Y(e,$,{y:"100vh",opacity:1},!0)),k.run(1))}),M=!0)},o(r){r&&(k||(k=Y(e,$,{y:"100vh",opacity:1},!1)),k.run(0)),M=!1},d(r){r&&x(e),Z(n,r),Z(y,r),r&&k&&k.end(),V=!1,re(w)}}}function le(s){let e,t=s[25].name+"",i,m,p;function h(){return s[17](s[25])}return{c(){e=v("button"),i=pe(t),this.h()},l(c){e=b(c,"BUTTON",{class:!0});var f=q(e);i=_e(f,t),f.forEach(x),this.h()},h(){_(e,"class","svelte-jw21jk")},m(c,f){z(c,e,f),u(e,i),m||(p=O(e,"click",h),m=!0)},p(c,f){s=c,f&16&&t!==(t=s[25].name+"")&&we(i,t)},d(c){c&&x(e),m=!1,p()}}}function ne(s){let e,t,i=`url('${ae(s[22])}')`,m,p;function h(){return s[18](s[22])}return{c(){e=v("div"),this.h()},l(c){e=b(c,"DIV",{class:!0,title:!0}),q(e).forEach(x),this.h()},h(){_(e,"class","imageThumbnail svelte-jw21jk"),_(e,"title",t=s[22].name),W(e,"background-image",i)},m(c,f){z(c,e,f),m||(p=O(e,"click",h),m=!0)},p(c,f){s=c,f&8&&t!==(t=s[22].name)&&_(e,"title",t),f&8&&i!==(i=`url('${ae(s[22])}')`)&&W(e,"background-image",i)},d(c){c&&x(e),m=!1,p()}}}function ke(s){let e,t,i="Show gallery",m,p,h,c,f,o,U,C,B,R,T,L,g,N="Add to Document",A,E,I,k,M,V,w=s[7]&&se(s);return{c(){e=v("div"),t=v("button"),t.textContent=i,m=j(),p=v("br"),h=j(),c=v("br"),f=j(),o=v("iframe"),C=j(),B=v("br"),R=j(),T=v("br"),L=j(),g=v("button"),g.textContent=N,A=j(),E=v("br"),I=j(),w&&w.c(),k=X(),this.h()},l(l){e=b(l,"DIV",{id:!0,class:!0});var n=q(e);t=b(n,"BUTTON",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-dro19e"&&(t.textContent=i),m=P(n),p=b(n,"BR",{}),h=P(n),c=b(n,"BR",{}),f=P(n),o=b(n,"IFRAME",{src:!0,id:!0,allow:!0,"xr-spatial-tracking":!0,"execution-while-out-of-viewport":!0,"execution-while-not-rendered":!0,"web-share":!0,mozallowfullscreen:!0,webkitallowfullscreen:!0,title:!0,class:!0}),q(o).forEach(x),C=P(n),B=b(n,"BR",{}),R=P(n),T=b(n,"BR",{}),L=P(n),g=b(n,"BUTTON",{class:!0,"data-svelte-h":!0}),H(g)!=="svelte-6jevxx"&&(g.textContent=N),A=P(n),E=b(n,"BR",{}),n.forEach(x),I=P(l),w&&w.l(l),k=X(),this.h()},h(){_(t,"class","svelte-jw21jk"),ie(o.src,U="")||_(o,"src",U),_(o,"id","viewerFrame"),_(o,"allow","autoplay; fullscreen; xr-spatial-tracking"),_(o,"xr-spatial-tracking",""),_(o,"execution-while-out-of-viewport",""),_(o,"execution-while-not-rendered",""),_(o,"web-share",""),o.allowFullscreen=!0,_(o,"mozallowfullscreen","true"),_(o,"webkitallowfullscreen","true"),_(o,"title","sketchfab embed"),_(o,"class","svelte-jw21jk"),_(g,"class","svelte-jw21jk"),_(e,"id","centered"),_(e,"class","svelte-jw21jk")},m(l,n){z(l,e,n),u(e,t),u(e,m),u(e,p),u(e,h),u(e,c),u(e,f),u(e,o),s[13](o),u(e,C),u(e,B),u(e,R),u(e,T),u(e,L),u(e,g),u(e,A),u(e,E),z(l,I,n),w&&w.m(l,n),z(l,k,n),M||(V=[O(t,"click",s[12]),O(g,"click",s[14])],M=!0)},p(l,[n]){l[7]?w?(w.p(l,n),n&128&&G(w,1)):(w=se(l),w.c(),G(w,1),w.m(k.parentNode,k)):w&&(ve(),J(w,1,1,()=>{w=null}),me())},i(l){G(w)},o(l){J(w)},d(l){l&&(x(e),x(I),x(k)),s[13](null),w&&w.d(l),M=!1,re(V)}}}function ae(s){return s.thumbnails.images.sort((e,t)=>t.size-e.size)[0].url}function ye(s,e,t){let i,m="7w7pAfrCfjovwykkEeRFLGw5SXS",p,h=[],c=[],f="animals-pets",o,U=new URL("https://api.sketchfab.com/v3/models"),C="",B=!1;async function R(){let l=new URL("https://api.sketchfab.com/v3/models");l.searchParams.set("sort_by","-viewCount"),l.searchParams.set("categories",f),l.searchParams.set("staffpicked",!0),l.searchParams.set("animated",!1),l.searchParams.set("has_sound",!1),l.searchParams.set("archives_flavours",!1);let S=await(await fetch(l)).json();t(3,h=S.results),U=new URL(S.next)}async function T(){let l=new URL("https://api.sketchfab.com/v3/search");l.searchParams.set("type","models"),l.searchParams.set("sort_by","-viewCount"),l.searchParams.set("q",C),l.searchParams.set("staffpicked",!0),l.searchParams.set("animated",!1),l.searchParams.set("has_sound",!1),l.searchParams.set("archives_flavours",!1);let S=await(await fetch(l)).json();t(3,h=S.results),U=new URL(S.next)}async function L(){let n=await(await fetch(U)).json();t(3,h=[...h,...n.results]),U=new URL(n.next)}async function g(){let n=await(await fetch("https://api.sketchfab.com/v3/categories?sort_by=slug")).json();t(4,c=n.results)}function N(){o=new Sketchfab(i),o.init(m,{success:l=>{t(2,p=l),p.start(),p.addEventListener("viewerready",function(){console.log("viewer is ready")})},error:()=>{console.log("error making viewer")},transparent:1})}ce(()=>{N(),R(),g()});const A=()=>{t(7,B=!0)};function E(l){fe[l?"unshift":"push"](()=>{i=l,t(0,i)})}const I=()=>{p.getScreenShot(2048,2048,"image/png",(l,n)=>{be.runScript(window.parent,`app.open("${n}", null, true);`)})},k=()=>{t(7,B=!1)};function M(){C=this.value,t(6,C)}return[i,m,p,h,c,f,C,B,R,T,L,N,A,E,I,k,M,l=>{t(5,f=l.slug),R()},l=>{t(1,m=l.uid),N(),t(7,B=!1)}]}class Ce extends he{constructor(e){super(),de(this,e,ye,ke,oe,{})}}export{Ce as component};
