var me=Object.defineProperty;var _e=(n,e,t)=>e in n?me(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var X=(n,e,t)=>_e(n,typeof e!="symbol"?e+"":e,t);import{f as K,s as we,h as be,r as ue,o as ge,i as fe,n as ve,e as ye}from"../chunks/scheduler.DeYPQbBC.js";import{S as ke,i as Ce,e as k,s as E,m as Y,c as C,d as V,y as H,h as F,g as O,o as b,j as z,k as p,z as N,t as D,a as $,n as de,A as Z,q as he,B as G,C as ee,b as Be,f as Ee,p as J,l as Fe}from"../chunks/index.DoflCQJQ.js";function q(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}class Q{constructor(e){X(this,"contentWindow");this.contentWindow=e}static async createEmbed(e,t){let l="";typeof t=="object"?l=JSON.stringify(t):typeof t=="string"&&(l=t);let i=document.createElement("iframe");return i.style.border="0",i.style.width="100%",i.style.height="100%",t?i.src="https://www.photopea.com#"+encodeURI(l):i.src="https://www.photopea.com",e.appendChild(i),await new Promise(function(d,u){let _=a=>{if(a.source==i.contentWindow&&a.data=="done"){let w=new Q(i.contentWindow);window.removeEventListener("message",_),d(w)}};window.addEventListener("message",_)})}async runScript(e){return await this._pause(),await new Promise((l,i)=>{let r=[],d=u=>{u.source==this.contentWindow&&(r.push(u.data),u.data=="done"&&(window.removeEventListener("message",d),l(r)))};window.addEventListener("message",d),this.contentWindow.postMessage(e,"*")})}async loadAsset(e){return await this._pause(),await new Promise((l,i)=>{let r=[],d=u=>{u.source==this.contentWindow&&(r.push(u.data),u.data=="done"&&(window.removeEventListener("message",d),l(r)))};window.addEventListener("message",d),this.contentWindow.postMessage(e,"*")})}async openFromURL(e,t=!0){await this._pause();let l="done";for(;l=="done";)l=(await this.runScript(`app.echoToOE(${t?"app.activeDocument.layers.length":"app.documents.length"})`))[0];let i=l;for(await this.runScript(`app.open("${e}", null, ${t});`);i==l||i=="done";)i=(await this.runScript(`app.echoToOE(${t?"app.activeDocument.layers.length":"app.documents.length"})`))[0];return["done"]}async exportImage(e="png"){await this._pause();let t="done";for(;t=="done";)t=(await this.runScript(`app.activeDocument.saveToOE("${e}");`))[0];return new Blob([t],{type:"image/"+e})}async _pause(e=10){return await new Promise((t,l)=>{setTimeout(()=>{t()},e)})}}function pe(n){const e=n-1;return e*e*e+1}function te(n,{delay:e=0,duration:t=400,easing:l=pe,x:i=0,y:r=0,opacity:d=0}={}){const u=getComputedStyle(n),_=+u.opacity,a=u.transform==="none"?"":u.transform,w=_*(1-d),[P,R]=K(i),[S,T]=K(r);return{delay:e,duration:t,easing:l,css:(j,B)=>`
			transform: ${a} translate(${(1-j)*P}${R}, ${(1-j)*S}${T});
			opacity: ${_-w*B}`}}function se(n,{delay:e=0,duration:t=400,easing:l=pe,axis:i="y"}={}){const r=getComputedStyle(n),d=+r.opacity,u=i==="y"?"height":"width",_=parseFloat(r[u]),a=i==="y"?["top","bottom"]:["left","right"],w=a.map(y=>`${y[0].toUpperCase()}${y.slice(1)}`),P=parseFloat(r[`padding${w[0]}`]),R=parseFloat(r[`padding${w[1]}`]),S=parseFloat(r[`margin${w[0]}`]),T=parseFloat(r[`margin${w[1]}`]),j=parseFloat(r[`border${w[0]}Width`]),B=parseFloat(r[`border${w[1]}Width`]);return{delay:e,duration:t,easing:l,css:y=>`overflow: hidden;opacity: ${Math.min(y*20,1)*d};${u}: ${y*_}px;padding-${a[0]}: ${y*P}px;padding-${a[1]}: ${y*R}px;margin-${a[0]}: ${y*S}px;margin-${a[1]}: ${y*T}px;border-${a[0]}-width: ${y*j}px;border-${a[1]}-width: ${y*B}px;`}}function ne(n,e,t){const l=n.slice();return l[23]=e[t],l}function ae(n,e,t){const l=n.slice();return l[26]=e[t],l}function le(n){let e,t,l="Hide gallery",i,r,d,u,_,a,w,P,R,S,T,j,B,y,W,U,M,x,I,L=q(n[4]),v=[];for(let c=0;c<L.length;c+=1)v[c]=re(ae(n,L,c));let m=q(n[3]),s=[];for(let c=0;c<m.length;c+=1)s[c]=oe(ne(n,m,c));const h=c=>$(s[c],1,1,()=>{s[c]=null});let g=n[6]&&ie(n);return{c(){e=k("div"),t=k("button"),t.textContent=l,i=E(),r=k("br"),d=E(),u=k("br"),_=E(),a=k("input"),w=E(),P=k("br"),R=E();for(let c=0;c<v.length;c+=1)v[c].c();S=E(),T=k("br"),j=E();for(let c=0;c<s.length;c+=1)s[c].c();B=E(),y=k("br"),W=E(),g&&g.c(),this.h()},l(c){e=C(c,"DIV",{id:!0,class:!0});var f=V(e);t=C(f,"BUTTON",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-1vklefy"&&(t.textContent=l),i=F(f),r=C(f,"BR",{}),d=F(f),u=C(f,"BR",{}),_=F(f),a=C(f,"INPUT",{placeholder:!0,id:!0,class:!0}),w=F(f),P=C(f,"BR",{}),R=F(f);for(let o=0;o<v.length;o+=1)v[o].l(f);S=F(f),T=C(f,"BR",{}),j=F(f);for(let o=0;o<s.length;o+=1)s[o].l(f);B=F(f),y=C(f,"BR",{}),W=F(f),g&&g.l(f),f.forEach(O),this.h()},h(){b(t,"class","svelte-tb41n5"),b(a,"placeholder","Search for a model"),b(a,"id","searchBar"),b(a,"class","svelte-tb41n5"),b(e,"id","modelGallery"),b(e,"class","svelte-tb41n5")},m(c,f){z(c,e,f),p(e,t),p(e,i),p(e,r),p(e,d),p(e,u),p(e,_),p(e,a),Z(a,n[7]),p(e,w),p(e,P),p(e,R);for(let o=0;o<v.length;o+=1)v[o]&&v[o].m(e,null);p(e,S),p(e,T),p(e,j);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);p(e,B),p(e,y),p(e,W),g&&g.m(e,null),M=!0,x||(I=[N(t,"click",n[17]),N(a,"input",n[18]),N(a,"change",n[11])],x=!0)},p(c,f){if(f&128&&a.value!==c[7]&&Z(a,c[7]),f&1072){L=q(c[4]);let o;for(o=0;o<L.length;o+=1){const A=ae(c,L,o);v[o]?v[o].p(A,f):(v[o]=re(A),v[o].c(),v[o].m(e,S))}for(;o<v.length;o+=1)v[o].d(1);v.length=L.length}if(f&8458){m=q(c[3]);let o;for(o=0;o<m.length;o+=1){const A=ne(c,m,o);s[o]?(s[o].p(A,f),D(s[o],1)):(s[o]=oe(A),s[o].c(),D(s[o],1),s[o].m(e,B))}for(he(),o=m.length;o<s.length;o+=1)h(o);de()}c[6]?g?g.p(c,f):(g=ie(c),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},i(c){if(!M){for(let f=0;f<m.length;f+=1)D(s[f]);c&&fe(()=>{M&&(U||(U=G(e,te,{y:"100vh",opacity:1},!0)),U.run(1))}),M=!0}},o(c){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)$(s[f]);c&&(U||(U=G(e,te,{y:"100vh",opacity:1},!1)),U.run(0)),M=!1},d(c){c&&O(e),ee(v,c),ee(s,c),g&&g.d(),c&&U&&U.end(),x=!1,ue(I)}}}function re(n){let e,t=n[26].name+"",l,i,r;function d(){return n[19](n[26])}return{c(){e=k("button"),l=Be(t),this.h()},l(u){e=C(u,"BUTTON",{class:!0});var _=V(e);l=Ee(_,t),_.forEach(O),this.h()},h(){b(e,"class","svelte-tb41n5"),J(e,"padding","4px 8px"),J(e,"font-size","10px")},m(u,_){z(u,e,_),p(e,l),i||(r=N(e,"click",d),i=!0)},p(u,_){n=u,_&16&&t!==(t=n[26].name+"")&&Fe(l,t)},d(u){u&&O(e),i=!1,r()}}}function oe(n){let e,t,l,i=`url('${ce(n[23])}')`,r,d,u;function _(){return n[20](n[23])}return{c(){e=k("div"),this.h()},l(a){e=C(a,"DIV",{class:!0,title:!0}),V(e).forEach(O),this.h()},h(){b(e,"class","imageThumbnail svelte-tb41n5"),b(e,"title",t=n[23].name),J(e,"background-image",i)},m(a,w){z(a,e,w),r=!0,d||(u=N(e,"click",_),d=!0)},p(a,w){n=a,(!r||w&8&&t!==(t=n[23].name))&&b(e,"title",t),w&8&&i!==(i=`url('${ce(n[23])}')`)&&J(e,"background-image",i)},i(a){r||(a&&fe(()=>{r&&(l||(l=G(e,se,{},!0)),l.run(1))}),r=!0)},o(a){a&&(l||(l=G(e,se,{},!1)),l.run(0)),r=!1},d(a){a&&O(e),a&&l&&l.end(),d=!1,u()}}}function ie(n){let e,t="More",l,i;return{c(){e=k("button"),e.textContent=t,this.h()},l(r){e=C(r,"BUTTON",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-bjmsex"&&(e.textContent=t),this.h()},h(){b(e,"class","svelte-tb41n5")},m(r,d){z(r,e,d),l||(i=N(e,"click",n[12]),l=!0)},p:ve,d(r){r&&O(e),l=!1,i()}}}function Pe(n){let e,t,l="Show gallery",i,r,d,u,_,a,w,P,R,S,T,j,B,y="Add to Document",W,U,M,x,I,L,v,m=n[8]&&le(n);return{c(){e=k("div"),t=k("button"),t.textContent=l,i=E(),r=k("br"),d=E(),u=k("br"),_=E(),a=k("iframe"),P=E(),R=k("br"),S=E(),T=k("br"),j=E(),B=k("button"),B.textContent=y,W=E(),U=k("br"),M=E(),m&&m.c(),x=Y(),this.h()},l(s){e=C(s,"DIV",{id:!0,class:!0});var h=V(e);t=C(h,"BUTTON",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-dro19e"&&(t.textContent=l),i=F(h),r=C(h,"BR",{}),d=F(h),u=C(h,"BR",{}),_=F(h),a=C(h,"IFRAME",{src:!0,id:!0,allow:!0,"xr-spatial-tracking":!0,"execution-while-out-of-viewport":!0,"execution-while-not-rendered":!0,"web-share":!0,mozallowfullscreen:!0,webkitallowfullscreen:!0,title:!0,class:!0}),V(a).forEach(O),P=F(h),R=C(h,"BR",{}),S=F(h),T=C(h,"BR",{}),j=F(h),B=C(h,"BUTTON",{class:!0,"data-svelte-h":!0}),H(B)!=="svelte-xtpcyb"&&(B.textContent=y),W=F(h),U=C(h,"BR",{}),h.forEach(O),M=F(s),m&&m.l(s),x=Y(),this.h()},h(){b(t,"class","svelte-tb41n5"),be(a.src,w="")||b(a,"src",w),b(a,"id","viewerFrame"),b(a,"allow","autoplay; fullscreen; xr-spatial-tracking"),b(a,"xr-spatial-tracking",""),b(a,"execution-while-out-of-viewport",""),b(a,"execution-while-not-rendered",""),b(a,"web-share",""),a.allowFullscreen=!0,b(a,"mozallowfullscreen","true"),b(a,"webkitallowfullscreen","true"),b(a,"title","sketchfab embed"),b(a,"class","svelte-tb41n5"),b(B,"class","pink svelte-tb41n5"),b(e,"id","centered"),b(e,"class","svelte-tb41n5")},m(s,h){z(s,e,h),p(e,t),p(e,i),p(e,r),p(e,d),p(e,u),p(e,_),p(e,a),n[15](a),p(e,P),p(e,R),p(e,S),p(e,T),p(e,j),p(e,B),p(e,W),p(e,U),z(s,M,h),m&&m.m(s,h),z(s,x,h),I=!0,L||(v=[N(t,"click",n[14]),N(B,"click",n[16])],L=!0)},p(s,[h]){s[8]?m?(m.p(s,h),h&256&&D(m,1)):(m=le(s),m.c(),D(m,1),m.m(x.parentNode,x)):m&&(he(),$(m,1,1,()=>{m=null}),de())},i(s){I||(D(m),I=!0)},o(s){$(m),I=!1},d(s){s&&(O(e),O(M),O(x)),n[15](null),m&&m.d(s),L=!1,ue(v)}}}function ce(n){return n.thumbnails.images.sort((e,t)=>t.size-e.size)[0].url}function Re(n,e,t){let l,i="7w7pAfrCfjovwykkEeRFLGw5SXS",r,d=[],u=[],_="animals-pets",a,w="https://api.sketchfab.com/v3/models",P="",R=!1,S;async function T(){t(3,d=[]);let s=new URL("https://api.sketchfab.com/v3/models");s.searchParams.set("sort_by","-viewCount"),s.searchParams.set("categories",_),s.searchParams.set("staffpicked",!0),s.searchParams.set("animated",!1),s.searchParams.set("has_sound",!1),s.searchParams.set("archives_flavours",!1);let g=await(await fetch(s)).json();t(3,d=g.results),t(6,w=g.next)}async function j(){t(3,d=[]);let s=new URL("https://api.sketchfab.com/v3/search");s.searchParams.set("type","models"),s.searchParams.set("sort_by","-viewCount"),s.searchParams.set("q",P),s.searchParams.set("staffpicked",!0),s.searchParams.set("animated",!1),s.searchParams.set("has_sound",!1),s.searchParams.set("archives_flavours",!1);let g=await(await fetch(s)).json();t(3,d=g.results),t(6,w=new URL(g.next))}async function B(){let h=await(await fetch(w)).json();t(3,d=[...d,...h.results]),t(6,w=h.next)}async function y(){let h=await(await fetch("https://api.sketchfab.com/v3/categories?sort_by=slug")).json();t(4,u=h.results)}function W(){a=new Sketchfab(l),a.init(i,{success:s=>{t(2,r=s),r.start(),r.addEventListener("viewerready",function(){console.log("viewer is ready")})},error:()=>{console.log("error making viewer")},transparent:1})}ge(()=>{W(),T(),y(),t(9,S=new Q(window.parent))});const U=()=>{t(8,R=!0)};function M(s){ye[s?"unshift":"push"](()=>{l=s,t(0,l)})}const x=()=>{r.getScreenShot(2048,2048,"image/png",(s,h)=>{S.openFromURL(h,!0)})},I=()=>{t(8,R=!1)};function L(){P=this.value,t(7,P)}return[l,i,r,d,u,_,w,P,R,S,T,j,B,W,U,M,x,I,L,s=>{t(5,_=s.slug),T()},s=>{t(1,i=s.uid),W(),t(8,R=!1)}]}class Ue extends ke{constructor(e){super(),Ce(this,e,Re,Pe,we,{})}}export{Ue as component};
