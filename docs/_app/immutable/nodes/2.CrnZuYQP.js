import{f as Q,s as oe,h as ie,r as ae,o as ce,i as ue,e as fe}from"../chunks/scheduler.DeYPQbBC.js";import{S as he,i as de,e as b,s as P,m as X,c as w,d as F,y as H,h as C,g as M,o as _,j as V,k as u,z as I,t as G,a as J,n as me,A as K,B as Y,C as Z,b as pe,f as _e,l as ve,p as W,q as be}from"../chunks/index.DoflCQJQ.js";function D(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}var we={initEmbed:async function(s,e){var t=document.createElement("iframe");t.style.border="0",t.style.width="100%",t.style.height="100%",e?t.src="https://www.photopea.com#"+encodeURI(e):t.src="https://www.photopea.com",s.appendChild(t);var i=new Promise(function(m,p){var h=function(c){m(t),window.removeEventListener("message",h)};window.addEventListener("message",h)});return await i},runScript:async function(s,e){var t=new Promise(function(m,p){var h=[],c=function(f){f.source==s&&(h.push(f.data),f.data=="done"&&(m(h),window.removeEventListener("message",c)))};window.addEventListener("message",c)});s.postMessage(e,"*");var i=await t;return i},addBinaryAsset:async function(s,e){var t=new Promise(function(i,m){var p=function(h){h.source==s&&h.data=="done"&&(i(!0),window.removeEventListener("message",p))};window.addEventListener("message",p)});return s.postMessage(e,"*"),await t}};function ge(s){const e=s-1;return e*e*e+1}function $(s,{delay:e=0,duration:t=400,easing:i=ge,x:m=0,y:p=0,opacity:h=0}={}){const c=getComputedStyle(s),f=+c.opacity,o=c.transform==="none"?"":c.transform,U=f*(1-h),[B,R]=Q(m),[E,S]=Q(p);return{delay:e,duration:t,easing:i,css:(q,g)=>`
			transform: ${o} translate(${(1-q)*B}${R}, ${(1-q)*E}${S});
			opacity: ${f-U*g}`}}function ee(s,e,t){const i=s.slice();return i[22]=e[t],i}function te(s,e,t){const i=s.slice();return i[25]=e[t],i}function se(s){let e,t,i="Hide gallery",m,p,h,c,f,o,U,B,R,E,S,q,g,x,N,j,A="More",k,T,O,v,l=D(s[4]),n=[];for(let a=0;a<l.length;a+=1)n[a]=le(te(s,l,a));let L=D(s[3]),y=[];for(let a=0;a<L.length;a+=1)y[a]=ne(ee(s,L,a));return{c(){e=b("div"),t=b("button"),t.textContent=i,m=P(),p=b("br"),h=P(),c=b("br"),f=P(),o=b("input"),U=P(),B=b("br"),R=P();for(let a=0;a<n.length;a+=1)n[a].c();E=P(),S=b("br"),q=P();for(let a=0;a<y.length;a+=1)y[a].c();g=P(),x=b("br"),N=P(),j=b("button"),j.textContent=A,this.h()},l(a){e=w(a,"DIV",{id:!0,class:!0});var d=F(e);t=w(d,"BUTTON",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-1vklefy"&&(t.textContent=i),m=C(d),p=w(d,"BR",{}),h=C(d),c=w(d,"BR",{}),f=C(d),o=w(d,"INPUT",{placeholder:!0,id:!0,class:!0}),U=C(d),B=w(d,"BR",{}),R=C(d);for(let r=0;r<n.length;r+=1)n[r].l(d);E=C(d),S=w(d,"BR",{}),q=C(d);for(let r=0;r<y.length;r+=1)y[r].l(d);g=C(d),x=w(d,"BR",{}),N=C(d),j=w(d,"BUTTON",{class:!0,"data-svelte-h":!0}),H(j)!=="svelte-1opku3j"&&(j.textContent=A),d.forEach(M),this.h()},h(){_(t,"class","svelte-ro32sq"),_(o,"placeholder","Search for a model"),_(o,"id","searchBar"),_(o,"class","svelte-ro32sq"),_(j,"class","svelte-ro32sq"),_(e,"id","modelGallery"),_(e,"class","svelte-ro32sq")},m(a,d){V(a,e,d),u(e,t),u(e,m),u(e,p),u(e,h),u(e,c),u(e,f),u(e,o),K(o,s[6]),u(e,U),u(e,B),u(e,R);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null);u(e,E),u(e,S),u(e,q);for(let r=0;r<y.length;r+=1)y[r]&&y[r].m(e,null);u(e,g),u(e,x),u(e,N),u(e,j),T=!0,O||(v=[I(t,"click",s[15]),I(o,"input",s[16]),I(o,"change",s[9]),I(j,"click",s[10])],O=!0)},p(a,d){if(d&64&&o.value!==a[6]&&K(o,a[6]),d&304){l=D(a[4]);let r;for(r=0;r<l.length;r+=1){const z=te(a,l,r);n[r]?n[r].p(z,d):(n[r]=le(z),n[r].c(),n[r].m(e,E))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}if(d&2186){L=D(a[3]);let r;for(r=0;r<L.length;r+=1){const z=ee(a,L,r);y[r]?y[r].p(z,d):(y[r]=ne(z),y[r].c(),y[r].m(e,g))}for(;r<y.length;r+=1)y[r].d(1);y.length=L.length}},i(a){T||(a&&ue(()=>{T&&(k||(k=Y(e,$,{y:"100vh",opacity:1},!0)),k.run(1))}),T=!0)},o(a){a&&(k||(k=Y(e,$,{y:"100vh",opacity:1},!1)),k.run(0)),T=!1},d(a){a&&M(e),Z(n,a),Z(y,a),a&&k&&k.end(),O=!1,ae(v)}}}function le(s){let e,t=s[25].name+"",i,m,p;function h(){return s[17](s[25])}return{c(){e=b("button"),i=pe(t),this.h()},l(c){e=w(c,"BUTTON",{class:!0});var f=F(e);i=_e(f,t),f.forEach(M),this.h()},h(){_(e,"class","svelte-ro32sq")},m(c,f){V(c,e,f),u(e,i),m||(p=I(e,"click",h),m=!0)},p(c,f){s=c,f&16&&t!==(t=s[25].name+"")&&ve(i,t)},d(c){c&&M(e),m=!1,p()}}}function ne(s){let e,t,i=`url('${re(s[22])}')`,m,p;function h(){return s[18](s[22])}return{c(){e=b("div"),this.h()},l(c){e=w(c,"DIV",{class:!0,title:!0}),F(e).forEach(M),this.h()},h(){_(e,"class","imageThumbnail svelte-ro32sq"),_(e,"title",t=s[22].name),W(e,"background-image",i)},m(c,f){V(c,e,f),m||(p=I(e,"click",h),m=!0)},p(c,f){s=c,f&8&&t!==(t=s[22].name)&&_(e,"title",t),f&8&&i!==(i=`url('${re(s[22])}')`)&&W(e,"background-image",i)},d(c){c&&M(e),m=!1,p()}}}function ke(s){let e,t,i="Show gallery",m,p,h,c,f,o,U,B,R,E,S,q,g,x="Add to Document",N,j,A,k,T,O,v=s[7]&&se(s);return{c(){e=b("div"),t=b("button"),t.textContent=i,m=P(),p=b("br"),h=P(),c=b("br"),f=P(),o=b("iframe"),B=P(),R=b("br"),E=P(),S=b("br"),q=P(),g=b("button"),g.textContent=x,N=P(),j=b("br"),A=P(),v&&v.c(),k=X(),this.h()},l(l){e=w(l,"DIV",{id:!0,class:!0});var n=F(e);t=w(n,"BUTTON",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-dro19e"&&(t.textContent=i),m=C(n),p=w(n,"BR",{}),h=C(n),c=w(n,"BR",{}),f=C(n),o=w(n,"IFRAME",{src:!0,id:!0,allow:!0,"xr-spatial-tracking":!0,"execution-while-out-of-viewport":!0,"execution-while-not-rendered":!0,"web-share":!0,mozallowfullscreen:!0,webkitallowfullscreen:!0,title:!0,class:!0}),F(o).forEach(M),B=C(n),R=w(n,"BR",{}),E=C(n),S=w(n,"BR",{}),q=C(n),g=w(n,"BUTTON",{class:!0,"data-svelte-h":!0}),H(g)!=="svelte-6jevxx"&&(g.textContent=x),N=C(n),j=w(n,"BR",{}),n.forEach(M),A=C(l),v&&v.l(l),k=X(),this.h()},h(){_(t,"class","svelte-ro32sq"),ie(o.src,U="")||_(o,"src",U),_(o,"id","viewerFrame"),_(o,"allow","autoplay; fullscreen; xr-spatial-tracking"),_(o,"xr-spatial-tracking",""),_(o,"execution-while-out-of-viewport",""),_(o,"execution-while-not-rendered",""),_(o,"web-share",""),o.allowFullscreen=!0,_(o,"mozallowfullscreen","true"),_(o,"webkitallowfullscreen","true"),_(o,"title","sketchfab embed"),_(o,"class","svelte-ro32sq"),_(g,"class","svelte-ro32sq"),_(e,"id","centered"),_(e,"class","svelte-ro32sq")},m(l,n){V(l,e,n),u(e,t),u(e,m),u(e,p),u(e,h),u(e,c),u(e,f),u(e,o),s[13](o),u(e,B),u(e,R),u(e,E),u(e,S),u(e,q),u(e,g),u(e,N),u(e,j),V(l,A,n),v&&v.m(l,n),V(l,k,n),T||(O=[I(t,"click",s[12]),I(g,"click",s[14])],T=!0)},p(l,[n]){l[7]?v?(v.p(l,n),n&128&&G(v,1)):(v=se(l),v.c(),G(v,1),v.m(k.parentNode,k)):v&&(be(),J(v,1,1,()=>{v=null}),me())},i(l){G(v)},o(l){J(v)},d(l){l&&(M(e),M(A),M(k)),s[13](null),v&&v.d(l),T=!1,ae(O)}}}function re(s){return s.thumbnails.images.sort((e,t)=>t.size-e.size)[0].url}function ye(s,e,t){let i,m="7w7pAfrCfjovwykkEeRFLGw5SXS",p,h=[],c=[],f="animals-pets",o,U=new URL("https://api.sketchfab.com/v3/models"),B="",R=!1;async function E(){let l=new URL("https://api.sketchfab.com/v3/models");l.searchParams.set("sort_by","-viewCount"),l.searchParams.set("categories",f),l.searchParams.set("staffpicked",!0),l.searchParams.set("animated",!1),l.searchParams.set("has_sound",!1),l.searchParams.set("archives_flavours",!1);let L=await(await fetch(l)).json();t(3,h=L.results),U=new URL(L.next)}async function S(){let l=new URL("https://api.sketchfab.com/v3/search");l.searchParams.set("type","models"),l.searchParams.set("sort_by","-viewCount"),l.searchParams.set("q",B),l.searchParams.set("staffpicked",!0),l.searchParams.set("animated",!1),l.searchParams.set("has_sound",!1),l.searchParams.set("archives_flavours",!1);let L=await(await fetch(l)).json();t(3,h=L.results),U=new URL(L.next)}async function q(){let n=await(await fetch(U)).json();t(3,h=[...h,...n.results]),U=new URL(n.next)}async function g(){let n=await(await fetch("https://api.sketchfab.com/v3/categories?sort_by=slug")).json();t(4,c=n.results)}function x(){o=new Sketchfab(i),o.init(m,{success:l=>{t(2,p=l),p.start(),p.addEventListener("viewerready",function(){console.log("viewer is ready")})},error:()=>{console.log("error making viewer")},transparent:1})}ce(()=>{x(),E(),g()});const N=()=>{t(7,R=!0)};function j(l){fe[l?"unshift":"push"](()=>{i=l,t(0,i)})}const A=()=>{p.getScreenShot(2048,2048,"image/png",(l,n)=>{we.runScript(window.parent,`app.open("${n}", null, true);`)})},k=()=>{t(7,R=!1)};function T(){B=this.value,t(6,B)}return[i,m,p,h,c,f,B,R,E,S,q,x,N,j,A,k,T,l=>{t(5,f=l.slug),E()},l=>{t(1,m=l.uid),x(),t(7,R=!1)}]}class Be extends he{constructor(e){super(),de(this,e,ye,ke,oe,{})}}export{Be as component};
